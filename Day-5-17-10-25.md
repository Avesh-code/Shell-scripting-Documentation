# Day 5 (17/10/2025) of Shell-Scripting  
## practice In shell

# Monitoring Free RAM Space
```
#!/bin/bash

FREE_SPACE=$(free -mt | grep "Total" | awk '{print $4}')
TH=1000

if [[ $FREE_SPACE -lt $TH ]]
then
	echo "Warning , RAM is Running Low"
else
	echo "RAM Space is Sufficient - $FREE_SPACE M "
fi

```

We can also use crontab or AT for this  

# Monitoring Free space in Disk
```
#!/bin/bash

#monitor File System Usage 

FU=$(df -H | egrep -v "Filesystem|tmpfs|efivarfs" | grep "nvme0n1p2" | awk '{print $5}' | tr -d % )
TO="avesh.padaya@nuvo.ai"

if [[ $FU -ge 80 ]]
then
       echo "Warning sending mail!!"	
	echo "Warning, Disk Space is Low!!!!---- $FU % " | mailx -s "Warning The DISK SPACE is LOW!!!!!" $TO
else
	echo "Good sending mail"
	echo "All Good Free Disk space is $FU %" |  mailx -s "All Good " $TO
fi
```

I have used Mailx for sending mail for doing integration with mail we have to do following : commands  
```
# step 1: Installing mailutils
sudo apt install mailutils -y
# step 2: Configure the details for mail
nano ~/.mailrc
# step 3 : Inside this file write the following details for smtp
set smtp-use-starttls
set ssl-verify=ignore
set smtp=smtp://smtp.gmail.com:587
set smtp-auth=login
set smtp-auth-user=<Youremail>
set smtp-auth-password=<yourpassword>
set from="<Your email> (<Your name>)"
# please write your email and password
# step 4 : changing permission for mailrc
chmod 600 ~/.mailrc
# step 5 : check test
echo "test" | mailx -s "Test mail" <sender mail>

```
# Archiving files which are greater than 20 MB
```
#!/bin/bash
#$Revision:001$
#$Fri Oct 17 03:14:52 PM IST 2025$

#variables
BASE=/home/aveshpadaya/shell-scripting/Projects/files
DAYS=10
DEPTH=1
RUN=0

#check if the directory is present or not  

if [ ! -d $BASE ]
then
	echo "Directory does not exist : $BASE"
	exit 1
fi

#create 'archive' folder if not present

if [ ! -d $BASE/archive ] 
then
	mkdir $BASE/archive
fi

# finding list of files larger than 20 mb
for i in `find $BASE -maxdepth $DEPTH -type f -size +20M`
do
	if [ $RUN -eq 0  ]
	then
		echo "[$(date "+%y-%m-%d %H:%M:%S")] archiving $i ==> $BASE/archive"
		gzip $i || exit 1
		mv $i.gz $BASE/archive || exit 1
	fi
done

```
